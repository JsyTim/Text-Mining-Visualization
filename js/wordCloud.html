<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        #container {
            min-width: 310px;
            max-width: 750px;
            margin: 0 auto
        }
    </style>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="tags_with_name.js"></script>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="d3.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/wordcloud.js"></script>

    <div id="container"></div>
</head>
<body>
<script>

    var count = 1;
    var testOne = testData[count];
    console.log(testOne);

    let movies = d3.csv("movies.dat.csv", function(d) {
        return {
            title : d.title,
            id : +d.id,
            year : +d.year
        };
    }).then(function(data) {
        console.log(data[0]);

        var countYear;

        //cycle through the movie dictionary
        var btn = document.createElement("BUTTON");
        btn.innerHTML = "Next";
        document.body.appendChild(btn);

        btn.addEventListener ("click", function() {
            //Choosing the next WordCloud
            count++;
            var len = 0;
            for (var o in testData[count]) {
                len++;
            }
            while (len < 10){
                count++;
                len = 0;
                for (o in testData[count]) {
                    len++;
                }
            }
            if (count > 1000){
                count = 1;
            }
            console.log(count);
            //Update the WordCloud
            var testOne = testData[count];
            cloud = Highcharts.chart('container', {
                series: [{
                    type: 'wordcloud',
                    data: testOne,
                    name: 'Occurrences'
                }],
                title: {
                    text: data[count-1].title
                }
            });
        });

        //Reset the wordcloud to the first movie in the dictionary
        var btn2 = document.createElement("BUTTON");
        btn2.innerHTML = "Reset";
        document.body.appendChild(btn2);

        btn2.addEventListener ("click", function() {
            count = 1;
            console.log(count);
            testOne = testData[count];
            cloud = Highcharts.chart('container', {
                series: [{
                    type: 'wordcloud',
                    data: testOne,
                    name: 'Occurrences'
                }],
                title: {
                    text: data[count-1].title
                }
            });
        });

        Highcharts.seriesTypes.wordcloud.prototype.deriveFontSize = function (relativeWeight) {
            var maxFontSize = 25;
            // Will return a fontSize between 0px and 25px.
            return Math.floor(maxFontSize * relativeWeight);
        };

        //Drawing the first WordCloud
        cloud = Highcharts.chart('container', {
            series: [{
                type: 'wordcloud',
                data: testOne,
                name: 'Occurrences'
            }],
            title: {
                text: data[count-1].title
            }
        });

    });

</script>
</body>
</html>