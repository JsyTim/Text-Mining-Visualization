<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        #container {
            min-width: 310px;
            max-width: 750px;
            margin: 0 auto
        }
    </style>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="tags_with_name.js"></script>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="d3.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/wordcloud.js"></script>

    <div id="container"></div>
</head>
<body>
<script>

    var idCount = 1; // this one should be modify so it stores the movie id
    var testOne = testData[idCount]; //testOne returns the tags and occurrences of the movie with id equal to idCount
    //console.log(testOne);

    let movies = d3.csv("movies.dat.csv", function(d) {
        return {
            title : d.title,
            id : +d.id,
            year : +d.year
        };
    }).then(function(data) {
        console.log(data[0]);

        //Font size of the wordcloud
        Highcharts.seriesTypes.wordcloud.prototype.deriveFontSize = function (relativeWeight) {
            var maxFontSize = 25;
            // Will return a fontSize between 0px and 25px.
            return Math.floor(maxFontSize * relativeWeight);
        };

        //Button to create wordcloud from the tag movie dictionary
        var btn = document.createElement("BUTTON");
        btn.innerHTML = "Next";
        document.body.appendChild(btn);

        //Creates the wordcloud
        btn.addEventListener ("click", function() {
            //idCount = data.id;                        //This line is to set idCount equal to the movie id that we click on and needs to be modify to respond to click on the network
            //Update the WordCloud
            var testOne = testData[idCount];
            cloud = Highcharts.chart('container', {
                series: [{
                    type: 'wordcloud',
                    data: testOne,
                    name: 'Occurrences'
                }],
                title: {
                    text: data[idCount-1].title
                }
            });
        });

        //Reset the wordcloud to the first movie in the dictionary. Testing purposes only
        // ***********************************Lines below can be omitted**************************************************
        var btn2 = document.createElement("BUTTON");
        btn2.innerHTML = "Reset";
        document.body.appendChild(btn2);

        btn2.addEventListener ("click", function() {
            //idCount = data.id;                        //This line is to set idCount equal to the movie id that we click on and needs to be modify to respond to click on the network
            console.log(idCount);
            testOne = testData[idCount];
            cloud = Highcharts.chart('container', {
                series: [{
                    type: 'wordcloud',
                    data: testOne,
                    name: 'Occurrences'
                }],
                title: {
                    text: data[idCount-1].title
                }
            });
        });
        //***********************************Lines above can be omitted**************************************************


        //Drawing the default wordcloud for the first movie in the tag dictionary
        //***********************************Lines below can be omitted**************************************************
        cloud = Highcharts.chart('container', {
            series: [{
                type: 'wordcloud',
                data: testOne,
                name: 'Occurrences'
            }],
            title: {
                text: data[idCount-1].title
            }
        });
        //***********************************Lines above can be omitted**************************************************

    });

</script>
</body>
</html>